/*
 2015 Rubchuk Vladimir
 @license   GPLv3
 @version   0.9b

 Usage example :

   var colorPicker = new KellyColorPicker({place : 'color-picker'});

 ToDo :

   - вывод точек градиента sv через лерп для триугольного селектора
   - оформлять ввиде всплывающего окна для инпута (если инпут видимый) 
   - для позиционирование относительно инпута сделать универсальной geteventdot - вынести ф-ю получения
   оффсета элемента
   - проверить ф-цию rotatePath
   - сохранять массив инициализационных настроек после валидации
   - удалять canvas при удалении input'a

*/
function KellyColorPicker(aa){function ba(){var a={};a.size;a.padding=2;a.path;a.imageData=null;a.dotToSv=function(a){return{s:Math.abs(this.path[3].x-a.x)/this.size,v:Math.abs(this.path[3].y-a.y)/this.size}};a.svToDot=function(a){var c=this.path[0].x,g=this.path[0].y,b=.02;100>u&&(b=.07);for(var d=0;d<this.size;d++)for(var k=0;k<this.size;k++){var h={x:k+c,y:d+g},f=this.dotToSv(h),m=Math.abs(f.s-a.s),f=Math.abs(f.v-a.v);if(m<b&&f<b)return h}return{x:0,y:0}};a.limitDotPosition=function(a){var c=a.x;
a=a.y;c<this.path[0].x&&(c=this.path[0].x);c>this.path[0].x+this.size&&(c=this.path[0].x+this.size);a<this.path[0].y&&(a=this.path[0].y);a>this.path[0].y+this.size&&(a=this.path[0].y+this.size);return{x:c,y:a}};a.draw=function(){this.imageData||(this.imageData=b.createImageData(this.size,this.size));for(var a=0,c=this.path[0].x,g=this.path[0].y,Q=0;Q<this.size;Q++)for(var d=0;d<this.size;d++){var k=this.dotToSv({x:d+c,y:Q+g}),k=M(h.h,k.s,k.v);this.imageData.data[a+0]=k.r;this.imageData.data[a+1]=
k.g;this.imageData.data[a+2]=k.b;this.imageData.data[a+3]=255;a+=4}b.putImageData(this.imageData,c,g);b.beginPath();b.strokeStyle="rgba(0,0,0, 0.2)";b.lineWidth=2;for(a=0;a<=this.path.length-1;++a)0==a?b.moveTo(this.path[a].x,this.path[a].y):b.lineTo(this.path[a].x,this.path[a].y);b.stroke();b.closePath()};a.updateSize=function(){this.size=Math.floor((2*d.innerRadius-2*r.paddingX-2*this.padding)/Math.sqrt(2));this.path=[];this.path[0]={x:this.size/2*-1,y:this.size/2*-1};this.path[1]={x:this.path[0].x+
this.size,y:this.path[0].y};this.path[2]={x:this.path[1].x,y:this.path[1].y+this.size};this.path[3]={x:this.path[2].x-this.size,y:this.path[2].y};this.path[4]={x:this.path[0].x,y:this.path[0].y};for(var a=0;a<=this.path.length-1;++a)this.path[a].x+=d.pos.x,this.path[a].y+=d.pos.y};a.isDotIn=function(a){return a.x<this.path[0].x||a.x>this.path[0].x+this.size||a.y<this.path[0].y||a.y>this.path[0].y+this.size?!1:!0};return a}function ca(){var a={};a.size;a.padding=2;a.path;a.imageData=null;a.followWheel=
!0;a.s;a.sOnTop=!1;a.outerRadius;a.limitDotPosition=function(a){var c=a.x;a=a.y;var g=this.path[0].x,b=this.path[2].x,d=a,g=Math.min(Math.max(b,c),g),k=(this.path[0].y-this.path[1].y)/(this.path[0].x-this.path[1].x),f=Math.ceil(this.path[1].y+k*(g-this.path[1].x)),k=(this.path[0].y-this.path[2].y)/(this.path[0].x-this.path[2].x),k=Math.floor(this.path[2].y+k*(g-this.path[2].x));c<b&&(d=a);d=Math.min(Math.max(f,d),k);return{x:g,y:d}};a.svToDot=function(a){var c=.02;100>u&&(c=.07);for(var b=0;b<this.size;b++)for(var d=
0;d<this.size;d++){var f={x:this.path[1].x+d,y:this.path[1].y+b};if(v.isDotIn(f)){var k=this.dotToSv(f),h=Math.abs(k.s-a.s),k=Math.abs(k.v-a.v);if(h<c&&k<c)return f}}return{x:0,y:0}};a.draw=function(){this.imageData||(this.imageData=C.createImageData(this.size,this.size));B.width=this.size;B.height=this.size;for(var a=this.path[1].x,c=this.path[1].y,g=0,d=0;d<this.size;d++)for(var f=0;f<this.size;f++){var k={x:this.path[1].x+f,y:this.path[1].y+d};v.isDotIn(k)?(k=this.dotToSv(k),k=M(h.h,k.s,k.v),this.imageData.data[g+
0]=k.r,this.imageData.data[g+1]=k.g,this.imageData.data[g+2]=k.b,this.imageData.data[g+3]=255):(this.imageData.data[g+0]=0,this.imageData.data[g+1]=0,this.imageData.data[g+2]=0,this.imageData.data[g+3]=0);g+=4}C.putImageData(this.imageData,0,0);b.drawImage(B,a,c);b.beginPath();b.strokeStyle="rgba(0, 0, 0, 0.3)";b.lineWidth=2;a=this.path;for(g=0;g<=a.length-1;++g)0==g?b.moveTo(a[g].x,a[g].y):b.lineTo(a[g].x,a[g].y);b.stroke();b.closePath()};a.calcS=function(a){return Math.abs((a[1].x-a[0].x)*(a[2].y-
a[0].y)-(a[2].x-a[0].x)*(a[1].y-a[0].y))/2};a.dotToSv=function(a){var c=this.vol,b=((a.x-c[0].x)*(c[1].x-c[0].x)+(a.y-c[0].y)*(c[1].y-c[0].y))/((c[0].x-c[1].x)*(c[0].x-c[1].x)+(c[0].y-c[1].y)*(c[0].y-c[1].y));0>b&&(b=0);1<b&&(b=1);var d=c[0].y+b*(c[1].y-c[0].y),f=this.vol[0],c=Math.sqrt(Math.pow(c[0].x+b*(c[1].x-c[0].x)-f.x,2)+Math.pow(d-f.y,2));1>c&&(c=Math.floor(c));c>this.h-1&&(c=this.h);c/=this.h;a=Math.abs(T(a,this.sSide));30>a&&(a=30);a=60-(a-30);a/=60;return{s:a,v:c}};a.isDotIn=function(a){a=
[{x:this.path[0].x,y:this.path[0].y},{x:this.path[1].x,y:this.path[1].y},{x:a.x,y:a.y}];var c=this.calcS(a);a[1]={x:this.path[2].x,y:this.path[2].y};c+=this.calcS(a);a[0]={x:this.path[1].x,y:this.path[1].y};c+=this.calcS(a);return Math.ceil(c)==Math.ceil(this.s)?!0:!1};a.updateSize=function(){this.outerRadius=d.innerRadius-r.paddingX-this.padding;this.size=Math.floor(2*this.outerRadius*Math.sin(F/180*60));var a=Math.sqrt(3)/2*this.size;this.h=Math.sqrt(3)/2*this.size;this.path=[];this.path[0]={x:this.outerRadius,
y:0};this.path[1]={x:this.path[0].x-a,y:this.size/2*-1};this.path[2]={x:this.path[1].x,y:this.size/2};this.path[3]={x:this.path[0].x,y:this.path[0].y};for(a=0;a<=this.path.length-1;++a)this.path[a].x+=d.pos.x,this.path[a].y+=d.pos.y;this.vol=[];this.s=this.calcS(this.path);this.sOnTop?(a=U(this.path[0],this.path[2]),this.vol[0]={x:this.path[1].x,y:this.path[1].y},this.vol[1]={x:a.x,y:a.y},this.sSide=this.path[1]):(a=U(this.path[0],this.path[1]),this.vol[0]={x:this.path[2].x,y:this.path[2].y},this.vol[1]=
{x:a.x,y:a.y},this.sSide=this.path[2])};return a}function w(a,e,c){"object"!==typeof a&&(a=document.getElementById(a));if(!a)return!1;I[e]=c;a.addEventListener?a.addEventListener(e,I[e]):a.attachEvent("on"+e,I[e]);return!0}function p(a,e){"object"!==typeof a&&(a=document.getElementById(a));if(!a||!I[e])return!1;a.removeEventListener?a.removeEventListener(e,I[e]):a.detachEvent("on"+e,I[e]);I[e]=null;return!0}function M(a,e,c){var b,d,f,k,h,m;a&&void 0===e&&void 0===c&&(e=a.s,c=a.v,a=a.h);k=Math.floor(6*
a);h=6*a-k;a=c*(1-e);m=c*(1-h*e);e=c*(1-(1-h)*e);switch(k%6){case 0:b=c;d=e;f=a;break;case 1:b=m;d=c;f=a;break;case 2:b=a;d=c;f=e;break;case 3:b=a;d=m;f=c;break;case 4:b=e;d=a;f=c;break;case 5:b=c,d=a,f=m}return{r:Math.floor(255*b),g:Math.floor(255*d),b:Math.floor(255*f)}}function V(a){var e=function(a){a=a.toString(16);return 1===a.length?"0"+a:a};return"#"+e(a.r)+e(a.g)+e(a.b)}function U(a,e){return{x:(a.x+e.x)/2,y:(a.y+e.y)/2}}function T(a,e,c){e||(e={x:0,y:0});a=180*Math.atan2(a.y-e.y,a.x-e.x)/
F;c&&0>a&&(a=360+a);return a}function R(){W=2+r.paddingX;G=!1;d.imageData=null;x=u/2;d.pos={x:x,y:x};d.outerRadius=x-W;d.innerRadius=d.outerRadius-d.width;r.path=[{x:d.innerRadius-r.paddingX,y:-1*r.height},{x:d.outerRadius+r.paddingX,y:-1*r.height},{x:d.outerRadius+r.paddingX,y:r.height},{x:d.innerRadius-r.paddingX,y:r.height},{x:d.innerRadius-r.paddingX,y:-1*r.height}];var a=u;J&&(a+=l.width+2*l.padding);"CANVAS"!=y.tagName&&(y.style.width=a+"px",y.style.height=u+"px");n.width=a;n.height=u;v.updateSize();
J&&l.updateSize()}function N(){D&&(D.value=E,X&&(D.style.color=.5>h.v?"#FFF":"#000",D.style.background="rgba("+q.r+", "+q.g+", "+q.b+", "+K+")"))}function da(){if(!y)return!1;"CANVAS"!=y.tagName?(n=document.createElement("CANVAS"),y.appendChild(n)):n=y;"undefined"!=typeof window.G_vmlCanvasManager&&(n=window.G_vmlCanvasManager.initElement(n),B=window.G_vmlCanvasManager.initElement(B));return n.getContext&&n.getContext("2d")?(b=n.getContext("2d"),C=B.getContext("2d"),!0):!1}function P(){w(n,"mousedown",
function(a){f.mouseDownEvent(a)});w(n,"touchstart",function(a){f.mouseDownEvent(a)});w(n,"mouseout",function(a){f.mouseOutEvent(a)});w(window,"touchmove",function(a){f.touchMoveEvent(a)});w(n,"mousemove",function(a){f.mouseMoveRest(a)})}function Y(){p(n,"mousedown");p(n,"touchstart");p(n,"mouseout");p(window,"touchmove");p(n,"mousemove")}function H(a){a=a||window.event;var e,c=document.body.scrollLeft+document.documentElement.scrollLeft,b=document.body.scrollTop+document.documentElement.scrollTop;
a.touches?(e=a.touches[0].clientX+c,a=a.touches[0].clientY+b):(e=a.clientX+c,a=a.clientY+b);var d=n.getBoundingClientRect();e-=d.left+c;a-=d.top+b;return{x:e,y:a}}function ea(){if(!b)return!1;b.clearRect(0,0,n.width,n.height);if(G)return b.putImageData(O,0,0),J&&l.draw(),!0;d.draw();v.draw();J&&l.draw();t||(O=b.getImageData(0,0,u,u),G=!0);return!0}function L(){if(!ea())return!1;var a=360*h.h-d.startAngle;J&&(b.beginPath(),b.rect(l.pos.x-2,l.padding+l.height*(1-K)-1,l.width+4,2),b.strokeStyle="rgba(0,0,0, 0.8)",
b.lineWidth=2,b.stroke(),b.closePath());b.beginPath();var e=r.path,c;c=F/180*a;for(var a=[],g=0;g<=e.length-1;++g)a[g]={x:e[g].x*Math.cos(c)-e[g].y*Math.sin(c),y:e[g].x*Math.sin(c)+e[g].y*Math.cos(c)};for(e=0;e<=a.length-1;++e)a[e].x+=d.pos.x,a[e].y+=d.pos.y,0==e?b.moveTo(a[e].x,a[e].y):b.lineTo(a[e].x,a[e].y);b.strokeStyle="rgba(0,0,0,0.8)";b.lineWidth=r.lineWeight;b.stroke();b.closePath();b.strokeStyle=.5<h.v&&.5>h.s?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)";b.beginPath();b.lineWidth=2;b.arc(h.x,
h.y,Z.radius,0,2*F);b.stroke();b.closePath();return!1}var F=Math.PI,v,Z={radius:4},n=!1,b=!1,S="quad",J=!1,t=!1,z=!0,I=[],m=[],B=document.createElement("canvas"),C=!1,G=!1,O=null,D=!1,X=!0,y=!1,f=this,W,u=200,x,h,q,E="#000000",K=1,d={width:18,imageData:null};d.innerRadius;d.startAngle=0;d.outerRadius;d.outerStrokeStyle="rgba(0,0,0,0.2)";d.innerStrokeStyle="rgba(0,0,0,0.2)";d.pos;d.draw=function(){if(this.imageData)b.putImageData(this.imageData,0,0);else{for(var a=this.startAngle,e=0;360>=e;e++){var c=
F/180*(e-2),d=F/180*e;b.beginPath();b.moveTo(x,x);b.arc(x,x,this.outerRadius,c,d,!1);b.closePath();c=M(a/360,1,1);b.fillStyle="rgb("+c.r+", "+c.g+", "+c.b+")";b.fill();a++;360<=a&&(a=0)}b.globalCompositeOperation="destination-out";b.beginPath();b.arc(x,x,this.innerRadius,0,2*F);b.fill();b.globalCompositeOperation="source-over";b.strokeStyle=this.innerStrokeStyle;b.lineWidth=2;b.stroke();b.closePath();b.beginPath();b.arc(x,x,this.outerRadius,0,2*F);b.strokeStyle=this.outerStrokeStyle;b.lineWidth=2;
b.stroke();b.closePath();this.imageData=b.getImageData(0,0,u,u)}};d.isDotIn=function(a){return Math.pow(d.pos.x-a.x,2)+Math.pow(d.pos.y-a.y,2)<Math.pow(d.outerRadius,2)&&Math.pow(d.pos.x-a.x,2)+Math.pow(d.pos.y-a.y,2)>Math.pow(d.innerRadius,2)?!0:!1};var r={lineWeight:2,height:4,paddingX:2};r.path;var l={width:18,padding:4,outerStrokeStyle:"rgba(0,0,0,0.2)",innerStrokeStyle:"rgba(0,0,0,0.2)"};l.height;l.pos;l.updateSize=function(){this.pos={x:u+l.padding,y:l.padding};this.height=u-2*l.padding};l.draw=
function(){var a=b.createLinearGradient(0,0,0,this.height);a.addColorStop(0,"rgba("+q.r+","+q.g+","+q.b+",1)");a.addColorStop(1,"rgba("+q.r+","+q.g+","+q.b+",0)");b.beginPath();b.rect(this.pos.x,this.pos.y,this.width,this.height);b.fillStyle="white";b.fill();b.fillStyle=a;b.fill();b.strokeStyle="rgba(0,0,0, 0.2)";b.lineWidth=2;b.stroke();b.closePath()};l.dotToAlpha=function(a){return 1-Math.abs(this.pos.y-a.y)/this.height};l.alphaToDot=function(a){return{x:0,y:this.height-this.height*a}};l.limitDotPosition=
function(a){a=a.y;a<this.pos.y&&(a=this.pos.y);a>this.pos.y+this.height&&(a=this.pos.y+this.height);return{x:this.pos.x,y:a}};l.isDotIn=function(a){return a.x<this.pos.x||a.x>this.pos.x+l.width||a.y<this.pos.y||a.y>this.pos.y+this.height?!1:!0};var A={svCursorData:null,stCursor:null,curType:0,size:16,initSvCursor:function(){if(!n)return!1;var a=document.body;this.curType=1;this.stCursor||(this.stCursor=a.style.cursor);this.stCursor||(this.stCursor="auto");if(this.svCursorData)return a.style.cursor=
this.svCursorData,!0;if(!B)return!1;B.width=this.size;B.height=this.size;C.clearRect(0,0,this.size,this.size);C.strokeStyle="rgba(255, 255, 255, 1)";C.beginPath();C.lineWidth=2;C.arc(this.size/2,this.size/2,this.size/2,0,2*F);C.stroke();C.closePath();var e=A.size,c=B.toDataURL();this.svCursorData="url("+c+") "+e/2+" "+e/2+", auto";if(!this.svCursorData)return!1;a.style.cursor=this.svCursorData;-1===a.style.cursor.indexOf(c)&&(this.svCursorData="crosshair",a.style.cursor="crosshair");return!0},initStandartCursor:function(){this.stCursor&&
(A.curType=0,document.body.style.cursor=this.stCursor)},updateCursor:function(a){KellyColorPicker.cursorLock||(v.isDotIn(a)?A.initSvCursor():A.initStandartCursor())}};this.setHueByDot=function(a){a=T(a,d.pos)+d.startAngle;0>a&&(a=360+a);h.h=a/360;q=M(h.h,h.s,h.v);E=V(q);m.change&&(0,m.change)(f);N();G=!1;L()};this.setColorByHex=function(a){if(a&&a.length&&("#"!=a.charAt(0)&&(a="#"+a),7==a.length&&a.match(/^#([0-9A-F]){3}$|^#([0-9A-F]){6}$/img)&&(!E||a!=E||!G))){var e=a,e=parseInt("#"==e.charAt(0)?
e.slice(1):e,16);q={r:e>>16,g:e>>8&255,b:e&255};E=a;a=q;var c=e=void 0;a&&void 0===e&&void 0===c&&(e=a.g,c=a.b,a=a.r);a/=255;var e=e/255,c=c/255,b=Math.max(a,e,c),d=Math.min(a,e,c),l,k=b-d;if(b==d)l=0;else{switch(b){case a:l=(e-c)/k+(e<c?6:0);break;case e:l=(c-a)/k+2;break;case c:l=(a-e)/k+4}l/=6}h={h:l,s:0==b?0:k/b,v:b};l=v.svToDot(h);h.x=l.x;h.y=l.y;G=!1;L();m.change&&(0,m.change)(f);N()}};this.setAlphaByDot=function(a){K=l.dotToAlpha(a);m.change&&(0,m.change)(f);N();L()};this.setAlpha=function(a){K=
a;N();L()};this.setColorByDot=function(a){var b=v.dotToSv(a);h.s=b.s;h.v=b.v;h.x=a.x;h.y=a.y;1<h.s&&(h.s=1);0>h.s&&(h.s=0);1<h.v&&(h.v=1);0>h.v&&(h.v=0);q=M(h.h,h.s,h.v);E=V(q);m.change&&(0,m.change)(f);N();L()};this.mouseOutEvent=function(a){0<A.curType&&!KellyColorPicker.cursorLock&&A.initStandartCursor()};this.mouseMoveRest=function(a){if(!t&&z){z=!1;var b=H(a);A.updateCursor(b);requestAnimationFrame(function(){z=!0});m.mousemoverest&&(0,m.mousemoverest)(a,f,b)}};this.touchMoveEvent=function(a){t&&
event.preventDefault()};this.mouseDownEvent=function(a){a.preventDefault();var b,c=!1,g=H(a);d.isDotIn(g)?(t="wheel",f.setHueByDot(g),b=function(a){f.wheelMouseMove(a,g)},c=function(a){KellyColorPicker.cursorLock=!1;f.wheelMouseUp(a,g)}):v.isDotIn(g)?(t="sv",f.setColorByDot(g),b=function(a){f.SvMouseMove(a,g)},c=function(a){KellyColorPicker.cursorLock=!1;f.SvMouseUp(a,g)}):J&&l.isDotIn(g)&&(t="alpha",f.setAlphaByDot(g),b=function(a){f.AlphaMouseMove(a,g)},c=function(a){KellyColorPicker.cursorLock=
!1;f.AlphaMouseUp(a,g)});b&&c&&(Y(),KellyColorPicker.cursorLock=!0,w(document,"mouseup",c),w(document,"mousemove",b),w(document,"touchend",c),w(document,"touchmove",b))};this.wheelMouseMove=function(a,b){a.preventDefault();if(t&&z){z=!1;var c=H(a);requestAnimationFrame(function(){z=!0});f.setHueByDot(c);m.mousemoveh&&(0,m.mousemoveh)(a,f,c)}};this.wheelMouseUp=function(a,b){a.preventDefault();if(t){p(document,"mouseup");p(document,"mousemove");p(document,"touchend");p(document,"touchmove");P();G=
t=!1;L();var c=H(a);A.updateCursor(c);m.mouseuph&&(0,m.mouseuph)(a,f,c)}};this.AlphaMouseMove=function(a,b){a.preventDefault();if(t&&z){z=!1;var c=H(a),c=l.limitDotPosition(c);requestAnimationFrame(function(){z=!0});f.setAlphaByDot(c);m.mousemovealpha&&(0,m.mousemovealpha)(a,f,c)}};this.AlphaMouseUp=function(a,b){a.preventDefault();if(t){p(document,"mouseup");p(document,"mousemove");p(document,"touchend");p(document,"touchmove");P();t=!1;var c=H(a);A.updateCursor(c);m.mouseupalpha&&(0,m.mouseupalpha)(a,
f,c)}};this.SvMouseMove=function(a,b){a.preventDefault();if(t&&z){z=!1;var c=H(a),c=v.limitDotPosition(c);requestAnimationFrame(function(){z=!0});f.setColorByDot(c);m.mousemovesv&&(0,m.mousemovesv)(a,f,c)}};this.SvMouseUp=function(a,b){a.preventDefault();if(t){p(document,"mouseup");p(document,"mousemove");p(document,"touchend");p(document,"touchmove");P();t=!1;var c=H(a);A.updateCursor(c);m.mouseupsv&&(0,m.mouseupsv)(a,f,c)}};this.addUserEvent=function(a,b){m[a]=b;return!0};this.removeUserEvent=function(a){if(!m[a])return!1;
m[a]=null;return!0};this.getCanvas=function(){return b?n:!1};this.getCtx=function(){return b?b:!1};this.getInput=function(){return D};this.getSvFig=function(){return v};this.getSvFigCursor=function(){return Z};this.getWheel=function(){return d};this.getWheelCursor=function(){return r};this.getCurColorHsv=function(){return h};this.getCurColorRgb=function(){return q};this.getCurColorHex=function(){return E};this.getCurColorRgba=function(){return{r:q.r,g:q.g,b:q.b,a:K}};this.getCurAlpha=function(){return K};
this.updateView=function(a){if(!b)return!1;a&&(d.imageData=null,O=v.imageData=null);G=!1;R();L();return!0};this.resize=function(a){if(!b)return!1;if(a==u)return!0;G=!1;d.imageData=null;O=v.imageData=null;u=a;R();f.setColorByHex(E);return!1};this.destroy=function(){0<A.curType&&(KellyColorPicker.cursorLock=!1,A.initStandartCursor());t&&(p(document,"mouseup"),p(document,"mousemove"),p(document,"touchend"),p(document,"touchmove"),t=!1);d.imageData=null;B=O=v.imageData=null;y&&y.parentNode&&y.parentNode.removeChild(y);
Y();f=null};(function(a){var b="",c="";a.input&&"object"!==typeof a.input&&(a.input=document.getElementById(a.input));void 0!==a.alpha&&(K=a.alpha);void 0!==a.alpha_slider&&(J=a.alpha_slider);void 0!==a.input_color&&(X=a.input_color);if(a.input){D=a.input;var d=function(a){a=a||window.event;a.target||(a.target=a.srcElement);f.setColorByHex(a.target.value)};w(D,"click",d);w(D,"change",d);w(D,"keyup",d);w(D,"keypress",d)}a.userEvents&&(m=a.userEvents);a.place&&"object"!==typeof a.place&&(c=a.place,
a.place=document.getElementById(a.place));a.place?y=a.place:b+='| "place" ('+c+") not not found";a.size&&0<a.size&&(u=a.size);a.color&&(E=a.color);!a.method||"triangle"!=a.method&&"quad"!=a.method||(S=a.method);da()||(b+=" | cant init canvas context");"quad"==S&&(v=ba());"triangle"==S&&(v=ca());b?"undefined"!==typeof console&&console.log("KellyColorPicker : "+b):P();R();f.setColorByHex(E)})(aa)}KellyColorPicker.cursorLock=!1;
